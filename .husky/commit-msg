#!/usr/bin/env sh

# 커밋 메시지를 저장한 파일을 변수에 저장
message="$(cat "$1")"

# 정규 표현식을 사용하여 메시지 검사
requiredPattern="^(서영현|조영진|김예지|석은규|라대경|서민석)\s?:\s?[0-9]{1,2}주차\s?.{0,50}$"

if ! [[ $message =~ $requiredPattern ]]; then
  echo "=========================================================================="
  echo "======================   🚨 WRONG COMMIT MESSAGE!   ======================"
  echo "=========================================================================="
  echo "== Format should be => [이름]:[주차] [내용]                             =="
  echo "== Allowed Names: 서영현, 조영진, 김예지, 석은규, 라대경, 서민석         =="
  echo "== EXAMPLE => 서영현:1주차 로그인 기능 추가                          =="
  echo "=========================================================================="
  echo "== Your commit message was =>" $message 
  echo "== For more information, check script in .husky/commit-msg or README.md =="
  echo "=========================================================================="
  exit 1
else
  echo "=========================================================================="
  echo "=======================      COMMIT CREATED!!      ======================="
  echo "=========================================================================="
fi
